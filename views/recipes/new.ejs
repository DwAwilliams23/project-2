<%- include('../partials/header') %>

<div class="form-container">
  <form action="/recipes" method="POST" class="form-container">
    <label>Dish Name:
      <input type="text" name="dishName">
    </label>
    <br>
    <label for="cuisine">Cuisine:
      <select id="cuisine" name="cuisine">
        <option value="" selected disabled>Pick a cuisine</option>
        <% cuisines.forEach(cuisine => { %>
          <option value="<%= cuisine._id %>"><%= cuisine.name %></option>
        <% }); %>    
      </select>
    </label>
    <br>
    <label>Type of Food:
      <select name="foodType">
        <option value="Appetizer">Appetizer</option>
        <option value="Side-Dish">Side Dish</option>
        <option value="Main Dish">Main Dish</option>
        <option value="Dessert">Dessert</option>
        <option value="Full Course">Full Course</option>
      </select>
    </label>
    <br>
    <label>Servings:
      <input type="number" name="serving">
    </label>
    <br>
    <label>Prep Time:
      <input type="number" name="prepTime">
    </label>
    <br>
    <label>Cook Time:
      <input type="number" name="cookTime">
    </label>
    <br>
    <label>Total Time:
      <input type="number" name="totalTime">
    </label>
    <br>
    <label>Have made before:
      <input type="checkbox" name="haveMade" checked>
    </label>
    <br>
    <button type="submit" class="add-recipe-btn" data-processing="false">Add Recipe</button>
  </form>
</div>

<%- include('../partials/footer') %>

<script>
  
  const formElements = document.querySelectorAll("form");
  formElements.forEach((form) => {
    form.addEventListener("submit", (event) => {
      const submitButton = form.querySelector("[type='submit']");
      if (submitButton.getAttribute("data-processing") === "true") {
        event.preventDefault(); // Prevent the form from being submitted again
      } else {
        submitButton.setAttribute("data-processing", "true"); // Disable the submit button
        submitButton.disabled = true; // Disable the button visually
      }
    });
  });

</script>